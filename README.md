# プロジェクト管理シート

複数の GitHub リポジトリと個人タスクを、1つの Google Spreadsheet で一元管理するツール。

## できること

- **タスク一覧**: GitHub Projects のタスクを自動取得し、個人タスクと合わせて一覧表示
- **作業ログ**: 作業の開始・終了時刻を記録し、作業時間を自動計算
- **ダッシュボード**: プロジェクト別の総作業時間・平均タスク時間・実績時給を自動集計
- **自動同期**: 1時間ごとに GitHub から最新のタスクを自動取得

## 対象リポジトリ

- `kochan17/dating-app-support`
- `kochan17/leaning-x`
- `kochan17/co-co`

## シート構成

| シート名 | 用途 |
|---|---|
| タスク一覧 | これからやるべきタスクの一覧（GitHub 自動同期 + 手動追加） |
| 作業ログ | 実際に作業した記録（日付・開始時刻・終了時刻・作業時間） |
| 案件設定 | プロジェクトごとの報酬額を設定 |
| ダッシュボード | 自動集計（総作業時間・タスク数・実績時給） |

## セットアップ手順

### 1. Google Spreadsheet を作成

新しい Google Spreadsheet を作成する。

### 2. スクリプトエディタを開く

「拡張機能」→「Apps Script」を開く。

### 3. スクリプトファイルを作成

デフォルトの `コード.gs` を削除し、以下の 7 ファイルを作成する。
各ファイル名の `.js` を `.gs` に変えて作成し、`src/` 内の各ファイルの中身をコピペする。

| ファイル名 | 内容 |
|---|---|
| `Config.gs` | 設定値（リポジトリ一覧など） |
| `SheetUtils.gs` | シート操作のユーティリティ |
| `GitHubAPI.gs` | GitHub API 連携 |
| `TaskList.gs` | タスク一覧シートの管理 |
| `WorkLog.gs` | 作業ログシートの管理 |
| `Dashboard.gs` | ダッシュボード・案件設定の管理 |
| `Main.gs` | メニュー・トリガー・初期設定 |

### 4. GitHub Token を設定

1. GitHub で Personal Access Token (classic) を作成
   - Settings → Developer settings → Personal access tokens → Tokens (classic)
   - スコープ: `repo`, `read:project`
2. Apps Script の「プロジェクトの設定」→「スクリプトプロパティ」を開く
3. プロパティ名 `GITHUB_TOKEN`、値にトークンを入力して保存

### 5. 初期設定を実行

1. スプレッドシートをリロード
2. メニューバーに「プロジェクト管理」が表示される
3. 「プロジェクト管理」→「初期設定」を実行
4. 初回はスクリプトの権限承認が必要（「許可」をクリック）

### 6. GitHub 同期を実行

「プロジェクト管理」→「GitHub からタスクを同期」を実行。

### 7. 自動同期を設定（任意）

「プロジェクト管理」→「自動同期を設定（1時間ごと）」を実行すると、1時間ごとに自動で GitHub のタスクが同期される。

## 使い方

### 日々の作業フロー

1. **タスク一覧**シートで今日やるタスクを確認
2. **作業ログ**シートに日付・プロジェクト・タスク名・開始時刻を入力
3. 作業が終わったら終了時刻を入力（作業時間は自動計算）
4. **ダッシュボード**を更新して実績時給を確認

### 個人タスクの追加

タスク一覧シートに手動で行を追加し、ソース列を「手動」にする。
GitHub 同期しても手動タスクは消えない。

### 報酬の設定

案件設定シートで各プロジェクトの報酬額を入力する。
co-co は受託なので、案件ごとの報酬額を入力すると実績時給が計算される。

## clasp でデプロイする場合（上級者向け）

```bash
npm install -g @google/clasp
clasp login
cp .clasp.json.example .clasp.json
# .clasp.json の scriptId を自分の Apps Script の ID に変更
clasp push
```
